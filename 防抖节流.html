<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>

		<button>提交 - 节流 - 只会执行最后一次</button>
		
		<button>11</button>

	</body>

	<!-- 节流 - 只会执行最后一次 -->
	<script>
		// 首先使用querySelector方法获取按钮元素
		const btn = document.querySelectorAll("button")[0];
		// 定义提交操作函数
		function payMoney() {
			console.log("节流 - 只会执行最后一次");
		}
		// 定义防抖函数
		// fn: 点击按钮要执行的函数
		// delay: 延迟时间
		function debounce(fn, delay) {
			// 设置定时器标识（写在return函数外面，方便下面内部函数获取）
			let timer;
			// 返回函数，不然调用debounce会立即执行此函数
			return function() {
				// fn指定this
				let context = this;
				// fn参数
				let args = arguments;
				// 先清除定时器
				clearTimeout(timer);
				//设置定时器
				timer = setTimeout(() => {
					// 调用函数
					fn.apply(context, args);
				}, delay);
			}
		}
		// 给按钮添加点击监听事件，点击时，执行debounce函数
		btn.addEventListener("click", debounce(payMoney, 3000))
	</script>




</html>